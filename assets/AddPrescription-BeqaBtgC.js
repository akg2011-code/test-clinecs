import{ax as L,Q as R,t as U,af as q,r as A,j as e,U as W,B as v,H as j,v as p,C as u,P as $,w as G}from"./index-DLnjnVCu.js";import{i as J,j as K}from"./index-DoPvV33R.js";import{u as X}from"./useMutation-CH8xzEHB.js";import{u as Y,M as Z}from"./MedicineAutocomplete-CD_T5QRC.js";import{i as ee,u as se,g as ie,F as s,f as ne}from"./index.esm-CU9MGMRa.js";import{A as te}from"./AddMedicine-J2vEtrpC.js";import{F as l,b as i,I as r}from"./utils-DHjTyQ2S.js";import{C as b,a as w}from"./chunk-YQO7BFFX-DeFCmj0r.js";import{D as S}from"./index-Q7d3q0Zt.js";import{H as re,T as M}from"./Dashboard-BVf00d6b.js";import{S as f}from"./chunk-3RSXBRAN-DjkGz0-1.js";import{I as ae}from"./index-CrveBHTj.js";import"./SettingData-5sbMzAiY.js";import"./button-BU2rN6Gn.js";import"./popover-Bdb83bZr.js";import"./HasPermission-Efb43n4z.js";import"./index-DscDBtoO.js";import"./chunk-MGVPL3OH-BhiF1P3g.js";import"./image-BEsbZakN.js";import"./chunk-Z6RXEUPO-CjATnNZs.js";const oe=async m=>{const d=await $(G.token,"add_prescription",m);if(d.response!==200)throw new Error(d.message);return d};function de(m){return m.some(d=>Object.entries(d).some(([n,x])=>n!=="notes"&&(x===null||x===""||x===void 0)))}function Ae(){const{id:m}=L(),d=R(),{register:n,getValues:x}=ee(),_=U(),[F]=q(),g=F.get("appointmentID"),P=F.get("patientID"),B=se(),{isOpen:I,onOpen:T,onClose:k}=ie(),{medicinesData:E}=Y(),[h,z]=A.useState([{medicine_name:"",dosage:1,duration:"For 3 days",time:"After Meal",dose_interval:"Once a Day",notes:""}]),[O,H]=A.useState({medicine_name:"",dosage:1,duration:"For 3 days",time:"After Meal",dose_interval:"Once a Day",notes:""}),c=(o,a,t)=>{z(y=>y.map((D,Q)=>Q===o?{...D,[a]:t}:D))},N=()=>{z([...h,O]),H({medicine_name:"",dosage:1,duration:"For 3 days",time:"After Meal",dose_interval:"Once a Day",notes:""})},V=o=>{z(a=>a.filter((t,y)=>y!==o))},C=X({mutationFn:async()=>{if(de(h))throw new Error("Please fill all the fields in medicines");const a={...x(),appointment_id:g,patient_id:P,medicines:h};await oe(a)},onSuccess:()=>{_.invalidateQueries(["prescription",m]),_.invalidateQueries(["prescriptios",g]),d(`/appointment/${g}`)},onError:o=>{ne(B,"error",o.message)}});return C.isPending?e.jsx(W,{}):e.jsxs(v,{children:[e.jsxs(l,{justify:"space-between",alignItems:"center",children:[e.jsx(j,{as:"h1",size:"md",children:"Add Prescription"}),e.jsx(p,{w:120,size:"sm",variant:u("blackButton","gray"),onClick:()=>{d(-1)},children:"Back"})]}),e.jsxs(v,{children:[" ",e.jsx(b,{mt:5,bg:u("white","gray.700"),children:e.jsxs(w,{p:3,as:"form",children:[e.jsxs(l,{justify:"space-between",children:[" ",e.jsx(j,{as:"h3",size:"sm",children:"Medicines -"})," ",e.jsx(p,{size:"sm",colorScheme:"blue",onClick:T,children:"New Medicine"})]}),e.jsx(S,{mt:2,mb:5}),h.map((o,a)=>e.jsxs(v,{children:[" ",e.jsxs(re,{spacing:4,w:"full",mb:5,align:"flex-end",children:[e.jsxs(i,{children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Medicine"}),e.jsx(Z,{name:"Medicine",data:E,defaultName:o.medicine_name,handleChange:c,mainIndex:a})]}),e.jsxs(i,{w:"150px",children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Dosage"}),e.jsx(f,{name:"dosage",value:o.dosage,onChange:t=>c(a,"dosage",t.target.value),size:"md",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Duration"}),e.jsxs(f,{name:"duration",value:o.duration,onChange:t=>c(a,"duration",t.target.value),size:"md",children:[e.jsx("option",{value:"For 3 days",children:"For 3 days"}),e.jsx("option",{value:"For 5 days",children:"For 5 days"}),e.jsx("option",{value:"For 7 days",children:"for 7 days"}),e.jsx("option",{value:"For 105days",children:"for 15 days"}),e.jsx("option",{value:"For 1 Month",children:"for 1 Month"})]})]}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Time"}),e.jsxs(f,{size:"md",name:"time",value:o.time,onChange:t=>c(a,"time",t.target.value),children:[e.jsx("option",{value:"After Meal",children:"After Meal"}),e.jsx("option",{value:"Before Meal",children:"Before Meal"})]})]}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Dose Interval"}),e.jsxs(f,{size:"md",name:"dose_interval",value:o.dose_interval,onChange:t=>c(a,"dose_interval",t.target.value),children:[" ",e.jsx("option",{value:"Once a Day",children:"Once a Day"}),e.jsx("option",{value:"Every Morning & Evening",children:"Every Morning & Evening"}),e.jsx("option",{value:"3 Times a day",children:"3 Times a day"}),e.jsx("option",{value:"4 Times a day",children:"4 Times a day"})]})]}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"sm",mb:0,children:"Notes"}),e.jsx(r,{size:"md",name:"notes",value:o.notes,onChange:t=>c(a,"notes",t.target.value)})]})," ",e.jsxs(l,{mb:"2px",children:[" ",h.length>1&&e.jsx(ae,{size:"md",colorScheme:"red",icon:e.jsx(J,{}),onClick:()=>{V(a)}})]})]})]},a)),e.jsx(p,{onClick:N,size:"sm",colorScheme:"facebook",rightIcon:e.jsx(K,{}),children:"Insert New Medicine"})]})}),e.jsx(b,{mt:5,bg:u("white","gray.700"),children:e.jsxs(w,{p:3,as:"form",children:[e.jsxs(l,{justify:"space-between",children:[" ",e.jsx(j,{as:"h3",size:"sm",children:"Physical Information -"})," "]}),e.jsx(S,{mt:2,mb:5}),e.jsxs(l,{flexWrap:"wrap",gap:5,children:[e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Food Allergies"}),e.jsx(r,{size:"md",...n("food_allergies")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Tendency to Bleed"}),e.jsx(r,{size:"md",...n("tendency_bleed")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Heart Disease"}),e.jsx(r,{size:"md",...n("heart_disease")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Blood Pressure"}),e.jsx(r,{size:"md",...n("blood_pressure")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Diabetic"}),e.jsx(r,{size:"md",...n("diabetic")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Surgery"}),e.jsx(r,{size:"md",...n("surgery")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Accident"}),e.jsx(r,{size:"md",...n("accident")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Others"}),e.jsx(r,{size:"md",...n("others")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Medical History"}),e.jsx(r,{size:"md",...n("medical_history")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Current Medication"}),e.jsx(r,{size:"md",...n("current_medication")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Female Pregnancy"}),e.jsx(r,{size:"md",...n("female_pregnancy")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Breast Feeding"}),e.jsx(r,{size:"md",...n("breast_feeding")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Pulse Rate"}),e.jsx(r,{size:"md",...n("pulse_rate")})]}),e.jsxs(i,{mt:3,w:"300px",children:[e.jsx(s,{fontSize:"sm",children:"Temperature"}),e.jsx(r,{size:"md",...n("temperature")})]})]})]})}),e.jsx(b,{mt:5,bg:u("white","gray.700"),children:e.jsxs(w,{p:3,as:"form",children:[e.jsxs(l,{justify:"space-between",children:[" ",e.jsx(j,{as:"h3",size:"sm",children:"Problem & Advice -"})," "]}),e.jsx(S,{mt:2,mb:5}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"md",mb:1,children:"Problem -"}),e.jsx(M,{height:100,...n("problem_desc")})]}),e.jsxs(i,{children:[e.jsx(s,{fontSize:"md",mb:1,children:"Tests -"}),e.jsx(M,{height:100,...n("test")})]}),e.jsxs(i,{mt:4,children:[e.jsx(s,{fontSize:"md",mb:1,children:"Advice -"}),e.jsx(M,{height:100,...n("advice")})]}),e.jsxs(i,{mt:4,children:[e.jsx(s,{fontSize:"md",mb:1,children:"Next Visit -"}),e.jsxs(l,{gap:5,alignItems:"center",children:["After",e.jsx(r,{w:16,type:"number",...n("next_visit"),min:1,defaultValue:1}),"Days"]})]})]})}),e.jsx(l,{w:"100%",justify:"end",mt:5,children:e.jsx(p,{w:96,colorScheme:"green",size:"sm",onClick:()=>{C.mutate()},children:"Save"})})]}),e.jsx(te,{isOpen:I,onClose:k})]})}export{Ae as default};
