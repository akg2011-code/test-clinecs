import{r as S,t as k,j as e,B as f,v as x,av as B,w as C,D as G,F as T,J as H}from"./index-DLnjnVCu.js";import{F as K}from"./index-DscDBtoO.js";import{e as P}from"./index-DizZbtXV.js";import{u as X}from"./SettingData-5sbMzAiY.js";import{A as Z,a as $,S as D,D as ee}from"./Dashboard-BVf00d6b.js";import{u as se}from"./UseSearchFilter-CSdYpLEl.js";import{i as L,u as b,M as R,b as O,a as _,c as w,h as N,d as A,F as Q,e as F,f as d,g as v}from"./index.esm-CU9MGMRa.js";import{D as y}from"./index-Q7d3q0Zt.js";import{b as U,I as E,F as z}from"./utils-DHjTyQ2S.js";import{I as q}from"./index-CrveBHTj.js";import"./HasPermission-Efb43n4z.js";import"./chunk-MGVPL3OH-BhiF1P3g.js";import"./image-BEsbZakN.js";import"./chunk-Z6RXEUPO-CjATnNZs.js";function te({isOpen:a,onClose:t,data:s}){const[r,o]=S.useState(),{register:h,handleSubmit:m,reset:c}=L(),u=k(),i=b(),l=async j=>{let p={...j};try{o(!0);const n=await B(C.token,"add_state",p);o(!1),n.response===200?(d(i,"success","State Added!"),u.invalidateQueries("states"),c(),t()):d(i,"error",n.message)}catch(n){o(!1),d(i,"error",JSON.stringify(n))}};return e.jsxs(R,{isOpen:a,onClose:t,isCentered:!0,size:"lg",scrollBehavior:"inside",children:[e.jsx(O,{}),e.jsxs(_,{as:"form",onSubmit:m(l),children:[e.jsx(w,{fontSize:18,py:2,children:"Add State"}),e.jsx(N,{}),e.jsx(y,{}),e.jsx(A,{children:e.jsx(f,{pb:3,children:e.jsxs(U,{isRequired:!0,children:[e.jsx(Q,{children:"Title"}),e.jsx(E,{defaultValue:s==null?void 0:s.title,placeholder:"Name",...h("title",{required:!0})})]})})}),e.jsx(y,{}),e.jsxs(F,{py:3,children:[e.jsx(x,{colorScheme:"gray",mr:3,onClick:t,size:"sm",children:"Close"}),e.jsx(x,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:r,children:"Add State"})]})]})]})}function re({isOpen:a,onClose:t,data:s}){const[r,o]=S.useState(),{register:h,handleSubmit:m,reset:c}=L(),u=k(),i=b(),l=async j=>{let p={...j,id:s.id};try{o(!0);const n=await B(C.token,"update_state",p);o(!1),n.response===200?(d(i,"success","State Updated!"),u.invalidateQueries("states"),c(),t()):d(i,"error",n.message)}catch(n){o(!1),d(i,"error",JSON.stringify(n))}};return e.jsxs(R,{isOpen:a,onClose:t,isCentered:!0,size:"lg",scrollBehavior:"inside",children:[e.jsx(O,{}),e.jsxs(_,{as:"form",onSubmit:m(l),children:[e.jsx(w,{fontSize:18,py:2,children:"Update State"}),e.jsx(N,{}),e.jsx(y,{}),e.jsx(A,{children:e.jsx(f,{pb:3,children:e.jsxs(U,{isRequired:!0,children:[e.jsx(Q,{children:"Title"}),e.jsx(E,{defaultValue:s==null?void 0:s.title,placeholder:"Title",...h("title",{required:!0})})]})})}),e.jsx(y,{}),e.jsxs(F,{py:3,children:[e.jsx(x,{colorScheme:"gray",mr:3,onClick:t,size:"sm",children:"Close"}),e.jsx(x,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:r,children:"Update State"})]})]})]})}function oe({isOpen:a,onClose:t,data:s}){const r=b(),o=S.useRef(),h=k(),[m,c]=S.useState(),u=async()=>{let i={id:s.id};try{c(!0);const l=await G(C.token,"delete_state",i);c(!1),l.response===200?(d(r,"success","State Deleted!"),h.invalidateQueries("states"),t()):d(r,"error",l.message)}catch(l){c(!1),d(r,"error",JSON.stringify(l))}};return e.jsx(Z,{isOpen:a,onClose:t,leastDestructiveRef:o,isCentered:!0,children:e.jsx(O,{children:e.jsxs($,{children:[e.jsxs(w,{fontSize:"lg",fontWeight:"semi-bold",children:["Delete State ( ",e.jsx("b",{children:s==null?void 0:s.title})," )"]}),e.jsx(A,{children:"Are you sure? You can not undo this action afterwards."}),e.jsxs(F,{children:[e.jsx(x,{ref:o,onClick:t,colorScheme:"gray",size:"sm",children:"Cancel"}),e.jsx(x,{colorScheme:"red",onClick:u,ml:3,size:"sm",isLoading:m,children:"Delete"})]})]})})})}function ye(){const{isOpen:a,onOpen:t,onClose:s}=v(),[r,o]=S.useState(),{isOpen:h,onOpen:m,onClose:c}=v(),{isOpen:u,onOpen:i,onClose:l}=v(),j=b(),p="Errortoast",n=async()=>(await H(C.token,"get_state")).data,I=g=>{o(g)},{isLoading:J,data:M,error:V}=X({queryKey:["states"],queryFn:n}),{handleSearchChange:W,filteredData:Y}=se(M);return V&&(j.isActive(p)||j({id:p,title:"oops!.",description:"Something bad happens.",status:"error",duration:2e3,isClosable:!0,position:"top"})),e.jsxs(f,{children:[J||!M?e.jsxs(f,{children:[e.jsxs(z,{mb:5,justify:"space-between",children:[e.jsx(D,{w:400,h:8}),e.jsx(D,{w:50,h:8})]}),e.jsx(D,{h:300,w:"100%"})]}):e.jsxs(f,{children:[e.jsxs(z,{mb:5,justify:"space-between",align:"center",children:[e.jsx(E,{size:"md",placeholder:"Search",w:400,maxW:"50vw",onChange:g=>W(g.target.value)}),e.jsx(f,{children:e.jsx(x,{size:"sm",colorScheme:"blue",onClick:t,children:"Add New"})})]}),e.jsx(ee,{data:Y,onActionClick:e.jsx(ie,{onClick:I,DeleteonOpen:m,EditonOpen:i})})]}),e.jsx(te,{isOpen:a,onClose:s}),e.jsx(oe,{isOpen:h,onClose:c,data:r}),u&&e.jsx(re,{isOpen:u,onClose:l,data:r})]})}const ie=({onClick:a,rowData:t,DeleteonOpen:s,EditonOpen:r})=>e.jsxs(z,{justify:"center",children:[e.jsx(q,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(t),r()},icon:e.jsx(P,{fontSize:18,color:T.colors.blue[500]})}),e.jsx(q,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(t),s()},icon:e.jsx(K,{fontSize:18,color:T.colors.red[500]})})]});export{ye as default};
