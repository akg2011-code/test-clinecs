import{Q as B,r as d,t as O,j as e,B as U,T as y,v as u,C as x,M as E,N as M,P as T,w as z}from"./index-DLnjnVCu.js";import{f as _}from"./index-CrveBHTj.js";import{i as q,u as Y,g as G,F as r,f as p}from"./index.esm-CU9MGMRa.js";import{I as Q,a as V}from"./IsdModal-DvHKxEmI.js";import{t as H}from"./today-D_vLUvRX.js";import{u as J}from"./HasPermission-Efb43n4z.js";import{N as W}from"./Dashboard-BVf00d6b.js";import{F as a,b as t,I as i}from"./utils-DHjTyQ2S.js";import{C as P,a as C}from"./chunk-YQO7BFFX-DeFCmj0r.js";import{I as $}from"./chunk-FKYN3ZGE-BIoTHd0a.js";import{S as K}from"./chunk-3RSXBRAN-DjkGz0-1.js";import{D as X}from"./index-Q7d3q0Zt.js";import{T as Z}from"./index-DscDBtoO.js";import{V as ee}from"./chunk-NTCQBYKE-B0koUvDf.js";import"./SettingData-5sbMzAiY.js";import"./chunk-MGVPL3OH-BhiF1P3g.js";import"./image-BEsbZakN.js";import"./chunk-Z6RXEUPO-CjATnNZs.js";function we(){const j=B(),[S,m]=d.useState(),{register:s,handleSubmit:b,reset:D}=q(),F=O(),n=Y(),[l,f]=d.useState(null),[g,v]=d.useState("+91"),{isOpen:A,onOpen:N,onClose:L}=G(),w=d.useRef(),k=o=>{const h=o.target.files[0];f(h)},I=async o=>{if(o.password!=o.cnfPassword)return p(n,"error","password does not match");let h={image:l,isd_code:g,...o};try{m(!0);const c=await T(z.token,"add_user",h);m(!1),c.response===200?(p(n,"success","User Added!"),F.invalidateQueries("users"),D(),j("/users")):p(n,"error",c.message)}catch(c){m(!1),p(n,"error",JSON.stringify(c))}},{hasPermission:R}=J();return R("USER_UPDATE")?e.jsxs(U,{children:[e.jsxs(a,{justify:"space-between",alignItems:"center",children:[e.jsx(y,{fontSize:20,fontWeight:500,children:"Add User"}),e.jsx(u,{w:120,size:"sm",variant:x("blackButton","gray"),onClick:()=>{j(-1)},children:"Back"})]}),e.jsxs(a,{gap:10,children:[e.jsx(P,{mt:5,bg:x("white","gray.700"),w:"70%",children:e.jsxs(C,{p:3,as:"form",onSubmit:b(I),children:[e.jsxs(a,{gap:10,children:[e.jsxs(t,{children:[e.jsx(r,{children:"Email"}),e.jsx(i,{w:250,type:"email",placeholder:"Email",...s("email")})]}),e.jsxs(t,{children:[e.jsx(r,{children:"Password"}),e.jsx(i,{type:"password",placeholder:"Password",...s("password")})]}),e.jsxs(t,{children:[e.jsx(r,{children:"Cnf Password"}),e.jsx(i,{type:"password",placeholder:"Password",...s("cnfPassword")})]})]}),e.jsxs(a,{gap:10,mt:5,children:[e.jsxs(t,{isRequired:!0,children:[e.jsx(r,{children:"First Name"}),e.jsx(i,{placeholder:"First Name",...s("f_name",{required:!0})})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(r,{children:"Last Name"}),e.jsx(i,{placeholder:"Last Name",...s("l_name",{required:!0})})]})]}),e.jsxs(a,{gap:10,mt:5,children:[e.jsxs(t,{children:[e.jsx(r,{children:"Phone"}),e.jsxs($,{children:[e.jsxs(Q,{cursor:"pointer",onClick:o=>{o.stopPropagation(),N()},children:[g," ",e.jsx(_,{style:{marginLeft:"10px"}})]}),e.jsx(i,{type:"tel",placeholder:"phone Number",...s("phone",{pattern:/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\\./0-9]*$/g})})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:"Date Of Birth (MM/DD/YYYY)"}),e.jsx(i,{max:H(),placeholder:"Select Date",size:"md",type:"date",...s("dob")})]}),e.jsxs(t,{children:[e.jsx(r,{children:"Gender"}),e.jsxs(K,{placeholder:"Select Gender",...s("gender"),children:[e.jsx("option",{value:"Female",children:"Female"})," ",e.jsx("option",{value:"Male",children:"Male"})]})]})]}),e.jsx(u,{w:"100%",mt:10,type:"submit",colorScheme:"green",size:"sm",isLoading:S,children:"Add"})]})}),e.jsx(P,{mt:5,bg:x("white","gray.700"),w:"25%",h:"fit-content",pb:10,children:e.jsxs(C,{p:2,children:[e.jsx(y,{textAlign:"center",children:"Profile Picture"}),e.jsx(X,{}),e.jsxs(a,{p:2,justify:"center",mt:5,position:"relative",children:[e.jsx(E,{borderRadius:"50%",h:200,objectFit:"cover",w:200,src:l?URL.createObjectURL(l):"/admin/profilePicturePlaceholder.png"}),l&&e.jsx(Z,{label:"Clear",fontSize:"md",children:e.jsx(M,{colorScheme:"red",variant:"solid",position:"absolute",right:2,onClick:()=>{f(null)}})})]}),e.jsxs(ee,{spacing:4,align:"stretch",mt:10,children:[e.jsx(i,{type:"file",display:"none",ref:w,onChange:k,accept:".jpeg, .svg, .png , .jpg"}),e.jsx(u,{size:"sm",onClick:()=>{w.current.click()},colorScheme:"blue",children:"Upload Profile Picture"})]})]})})]}),e.jsx(V,{isOpen:A,onClose:L,setisd_code:v})]}):e.jsx(W,{})}export{we as default};
