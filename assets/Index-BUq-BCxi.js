import{r as S,t as O,j as e,B as j,v as x,P as $,w as y,D as ee,av as se,F as L,J as ie}from"./index-DLnjnVCu.js";import{F as te}from"./index-DscDBtoO.js";import{e as oe}from"./index-DizZbtXV.js";import{u as re}from"./SettingData-5sbMzAiY.js";import{A as ne,a as ae,S as C,D as le}from"./Dashboard-BVf00d6b.js";import{i as _,u as D,M as q,b as v,a as B,c as w,h as M,d as E,F as N,e as k,f as u,g as b}from"./index.esm-CU9MGMRa.js";import{D as g}from"./index-Q7d3q0Zt.js";import{b as U,I as T,F as A}from"./utils-DHjTyQ2S.js";import{u as ce}from"./UseSearchFilter-CSdYpLEl.js";import{u as R}from"./HasPermission-Efb43n4z.js";import{I as P}from"./index-CrveBHTj.js";import"./chunk-MGVPL3OH-BhiF1P3g.js";import"./image-BEsbZakN.js";import"./chunk-Z6RXEUPO-CjATnNZs.js";function de({isOpen:r,onClose:s}){const[i,o]=S.useState(),{register:t,handleSubmit:p,reset:h}=_(),l=O(),c=D(),n=async a=>{let f={...a};try{o(!0);const d=await $(y.token,"add_specialization",f);o(!1),d.response===200?(u(c,"success","Specialization Added!"),l.invalidateQueries("specialization"),h(),s()):u(c,"error",d.message)}catch(d){o(!1),u(c,"error",JSON.stringify(d))}};return e.jsxs(q,{isOpen:r,onClose:s,isCentered:!0,size:"lg",children:[e.jsx(v,{}),e.jsxs(B,{as:"form",onSubmit:p(n),children:[e.jsx(w,{fontSize:18,py:2,children:"Add Specialization"}),e.jsx(M,{}),e.jsx(g,{}),e.jsx(E,{children:e.jsx(j,{pb:3,children:e.jsxs(U,{isRequired:!0,children:[e.jsx(N,{children:"Title"}),e.jsx(T,{placeholder:"Title",...t("title",{required:!0})})]})})}),e.jsx(g,{}),e.jsxs(k,{py:3,children:[e.jsx(x,{colorScheme:"gray",mr:3,onClick:s,size:"sm",children:"Close"}),e.jsx(x,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:i,children:"Add Specialization"})]})]})]})}function ue({isOpen:r,onClose:s,data:i}){const o=D(),t=S.useRef(),p=O(),[h,l]=S.useState(),c=async()=>{let n={id:i.id};try{l(!0);const a=await ee(y.token,"delete_specialization",n);l(!1),a.response===200?(u(o,"success","Specialization Deleted!"),p.invalidateQueries("specialization"),s()):u(o,"error",a.message)}catch(a){l(!1),u(o,"error",JSON.stringify(a))}};return e.jsx(ne,{isOpen:r,onClose:s,leastDestructiveRef:t,isCentered:!0,children:e.jsx(v,{children:e.jsxs(ae,{children:[e.jsxs(w,{fontSize:"lg",fontWeight:"semi-bold",children:["Delete Specialization ( ",e.jsx("b",{children:i==null?void 0:i.title})," )"]}),e.jsx(E,{children:"Are you sure? You can not undo this action afterwards."}),e.jsxs(k,{children:[e.jsx(x,{ref:t,onClick:s,colorScheme:"gray",size:"sm",children:"Cancel"}),e.jsx(x,{colorScheme:"red",onClick:c,ml:3,size:"sm",isLoading:h,children:"Delete Specialization"})]})]})})})}function pe({isOpen:r,onClose:s,data:i}){const[o,t]=S.useState(),{register:p,handleSubmit:h,reset:l}=_(),c=O(),n=D(),a=async f=>{let d={...f,id:i.id};try{t(!0);const m=await se(y.token,"update_specialization",d);t(!1),m.response===200?(u(n,"success","Specialization Updated!"),c.invalidateQueries("specialization"),l(),s()):u(n,"error",m.message)}catch(m){t(!1),u(n,"error",JSON.stringify(m))}};return e.jsxs(q,{isOpen:r,onClose:s,isCentered:!0,size:"lg",scrollBehavior:"inside",children:[e.jsx(v,{}),e.jsxs(B,{as:"form",onSubmit:h(a),children:[e.jsx(w,{fontSize:18,py:2,children:"Update Specialization"}),e.jsx(M,{}),e.jsx(g,{}),e.jsx(E,{children:e.jsx(j,{pb:3,children:e.jsxs(U,{isRequired:!0,children:[e.jsx(N,{children:"Title"}),e.jsx(T,{defaultValue:i==null?void 0:i.title,placeholder:"Title",...p("title",{required:!0})})]})})}),e.jsx(g,{}),e.jsxs(k,{py:3,children:[e.jsx(x,{colorScheme:"gray",mr:3,onClick:s,size:"sm",children:"Close"}),e.jsx(x,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:o,children:"Update Specialization"})]})]})]})}function we(){const{hasPermission:r}=R(),{isOpen:s,onOpen:i,onClose:o}=b(),[t,p]=S.useState(),{isOpen:h,onOpen:l,onClose:c}=b(),{isOpen:n,onOpen:a,onClose:f}=b(),d=D(),m="Errortoast",Q=async()=>{const I=(await ie(y.token,"get_specialization")).data.sort((G,K)=>{const V=new Date(K.created_at),X=new Date(G.created_at);return V-X});return console.log(I),I},H=z=>{p(z)},{isLoading:J,data:F,error:Z}=re({queryKey:["specialization"],queryFn:Q}),{handleSearchChange:W,filteredData:Y}=ce(F);return Z&&(d.isActive(m)||d({id:m,title:"oops!.",description:"Something bad happens.",status:"error",duration:2e3,isClosable:!0,position:"top"})),e.jsxs(j,{children:[J||!F?e.jsxs(j,{children:[e.jsxs(A,{mb:5,justify:"space-between",children:[e.jsx(C,{w:400,h:8}),e.jsx(C,{w:50,h:8})]}),e.jsx(C,{h:300,w:"100%"})]}):e.jsxs(j,{children:[e.jsxs(A,{mb:5,justify:"space-between",align:"center",children:[e.jsx(T,{size:"md",placeholder:"Search",w:400,maxW:"50vw",onChange:z=>W(z.target.value)}),e.jsx(j,{children:r("SPECIALIZATION_ADD")&&e.jsx(x,{size:"sm",colorScheme:"blue",onClick:i,children:"Add New"})})]}),e.jsx(le,{minPad:"8px",data:Y,onActionClick:e.jsx(he,{onClick:H,DeleteonOpen:l,EditonOpen:a})})]}),e.jsx(de,{isOpen:s,onClose:o}),e.jsx(ue,{isOpen:h,onClose:c,data:t}),n&&e.jsx(pe,{isOpen:n,onClose:f,data:t})]})}const he=({onClick:r,rowData:s,DeleteonOpen:i,EditonOpen:o})=>{const{hasPermission:t}=R();return e.jsxs(A,{justify:"center",children:[t("SPECIALIZATION_UPDATE")&&e.jsx(P,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{r(s),o()},icon:e.jsx(oe,{fontSize:18,color:L.colors.blue[500]})}),t("SPECIALIZATION_UPDATE")&&e.jsx(P,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{r(s),i()},icon:e.jsx(te,{fontSize:18,color:L.colors.red[500]})})]})};export{we as default};
