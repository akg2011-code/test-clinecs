import{r as a,d as G,u as ce,c as X,m as Z,e as ie,f as V,h as le,o as de,ac as fe,j as y,aG as me,g as A,a as O,n as N,a7 as pe,l as ve}from"./index-DLnjnVCu.js";import{c as ye,l as he,u as be}from"./index-Q7d3q0Zt.js";import{j as Me}from"./index.esm-CU9MGMRa.js";import{l as xe,m as Ee}from"./index-CrveBHTj.js";import{h as Ce,f as _e,g as we}from"./HasPermission-Efb43n4z.js";function Ie(e){const{key:n}=e;return n.length===1||n.length>1&&/[^a-zA-Z0-9]/.test(n)}function ge(e={}){const{timeout:n=300,preventDefault:t=()=>!0}=e,[s,o]=a.useState([]),r=a.useRef(),u=()=>{r.current&&(clearTimeout(r.current),r.current=null)},c=()=>{u(),r.current=setTimeout(()=>{o([]),r.current=null},n)};a.useEffect(()=>u,[]);function l(f){return i=>{if(i.key==="Backspace"){const d=[...s];d.pop(),o(d);return}if(Ie(i)){const d=s.concat(i.key);t(i)&&(i.preventDefault(),i.stopPropagation()),o(d),f(d.join("")),c()}}}return l}function ke(e,n,t,s){if(n==null)return s;if(!s)return e.find(u=>t(u).toLowerCase().startsWith(n.toLowerCase()));const o=e.filter(r=>t(r).toLowerCase().startsWith(n.toLowerCase()));if(o.length>0){let r;return o.includes(s)?(r=o.indexOf(s)+1,r===o.length&&(r=0),o[r]):(r=e.indexOf(o[0]),e[r])}return s}function De(e){const n=e.current;if(!n)return!1;const t=xe(n);return!t||n.contains(t)?!1:!!Me(t)}function Pe(e,n){const{shouldFocus:t,visible:s,focusRef:o}=n,r=t&&!s;G(()=>{if(!r||De(e))return;const u=(o==null?void 0:o.current)||e.current;let c;if(u)return c=requestAnimationFrame(()=>{u.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[r,e,o])}function Oe(e){const{ref:n,handler:t,enabled:s=!0}=e,o=ce(t),u=a.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;a.useEffect(()=>{if(!s)return;const c=d=>{$(d,n)&&(u.isPointerDown=!0)},l=d=>{if(u.ignoreEmulatedMouseEvents){u.ignoreEmulatedMouseEvents=!1;return}u.isPointerDown&&t&&$(d,n)&&(u.isPointerDown=!1,o(d))},f=d=>{u.ignoreEmulatedMouseEvents=!0,t&&u.isPointerDown&&$(d,n)&&(u.isPointerDown=!1,o(d))},i=Y(n.current);return i.addEventListener("mousedown",c,!0),i.addEventListener("mouseup",l,!0),i.addEventListener("touchstart",c,!0),i.addEventListener("touchend",f,!0),()=>{i.removeEventListener("mousedown",c,!0),i.removeEventListener("mouseup",l,!0),i.removeEventListener("touchstart",c,!0),i.removeEventListener("touchend",f,!0)}},[t,n,o,u,s])}function $(e,n){var t;const s=e.target;return s&&!Y(s).contains(s)?!1:!((t=n.current)!=null&&t.contains(s))}function Y(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function Se(e){const{isOpen:n,ref:t}=e,[s,o]=a.useState(n),[r,u]=a.useState(!1);return a.useEffect(()=>{r||(o(n),u(!0))},[n,r,s]),Ce(()=>t.current,"animationend",()=>{o(n)}),{present:!(n?!1:!s),onComplete(){var l;const f=Ee(t.current),i=new f.CustomEvent("animationend",{bubbles:!0});(l=t.current)==null||l.dispatchEvent(i)}}}var[Fe,Ae,Le,Re]=ye(),[Te,j]=X({strict:!1,name:"MenuContext"});function Ne(e,...n){const t=a.useId(),s=e||t;return a.useMemo(()=>n.map(o=>`${o}-${s}`),[s,n])}function ee(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function Q(e){return ee(e).activeElement===e}function je(e={}){const{id:n,closeOnSelect:t=!0,closeOnBlur:s=!0,initialFocusRef:o,autoSelect:r=!0,isLazy:u,isOpen:c,defaultIsOpen:l,onClose:f,onOpen:i,placement:d="bottom-start",lazyBehavior:_="unmount",direction:h,computePositionOnMount:L=!1,...D}=e,w=a.useRef(null),m=a.useRef(null),I=Le(),P=a.useCallback(()=>{requestAnimationFrame(()=>{var x;(x=w.current)==null||x.focus({preventScroll:!1})})},[]),b=a.useCallback(()=>{const x=setTimeout(()=>{var C;if(o)(C=o.current)==null||C.focus();else{const W=I.firstEnabled();W&&F(W.index)}});H.current.add(x)},[I,o]),g=a.useCallback(()=>{const x=setTimeout(()=>{const C=I.lastEnabled();C&&F(C.index)});H.current.add(x)},[I]),E=a.useCallback(()=>{i==null||i(),r?b():P()},[r,b,P,i]),{isOpen:p,onOpen:M,onClose:k,onToggle:S}=_e({isOpen:c,defaultIsOpen:l,onClose:f,onOpen:E});Oe({enabled:p&&s,ref:w,handler:x=>{var C;(C=m.current)!=null&&C.contains(x.target)||k()}});const z=we({...D,enabled:p||L,placement:d,direction:h}),[R,F]=a.useState(-1);G(()=>{p||F(-1)},[p]),Pe(w,{focusRef:m,visible:p,shouldFocus:!0});const T=Se({isOpen:p,ref:w}),[B,U]=Ne(n,"menu-button","menu-list"),v=a.useCallback(()=>{M(),P()},[M,P]),H=a.useRef(new Set([]));a.useEffect(()=>{const x=H.current;return()=>{x.forEach(C=>clearTimeout(C)),x.clear()}},[]);const oe=a.useCallback(()=>{M(),b()},[b,M]),se=a.useCallback(()=>{M(),g()},[M,g]),re=a.useCallback(()=>{var x,C;const W=ee(w.current),ae=(x=w.current)==null?void 0:x.contains(W.activeElement);if(!(p&&!ae))return;const J=(C=I.item(R))==null?void 0:C.node;J==null||J.focus({preventScroll:!0})},[p,R,I]),ue=a.useRef(null);return{openAndFocusMenu:v,openAndFocusFirstItem:oe,openAndFocusLastItem:se,onTransitionEnd:re,unstable__animationState:T,descendants:I,popper:z,buttonId:B,menuId:U,forceUpdate:z.forceUpdate,orientation:"vertical",isOpen:p,onToggle:S,onOpen:M,onClose:k,menuRef:w,buttonRef:m,focusedIndex:R,closeOnSelect:t,closeOnBlur:s,autoSelect:r,setFocusedIndex:F,isLazy:u,lazyBehavior:_,initialFocusRef:o,rafId:ue}}function Ke(e={},n=null){const t=j(),{onToggle:s,popper:o,openAndFocusFirstItem:r,openAndFocusLastItem:u}=t,c=a.useCallback(l=>{const f=l.key,d={Enter:r,ArrowDown:r,ArrowUp:u}[f];d&&(l.preventDefault(),l.stopPropagation(),d(l))},[r,u]);return{...e,ref:Z(t.buttonRef,n,o.referenceRef),id:t.buttonId,"data-active":ie(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:V(e.onClick,s),onKeyDown:V(e.onKeyDown,c)}}function q(e){var n;return We(e)&&!!((n=e==null?void 0:e.getAttribute("role"))!=null&&n.startsWith("menuitem"))}function ze(e={},n=null){const t=j();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:o,menuRef:r,isOpen:u,onClose:c,menuId:l,isLazy:f,lazyBehavior:i,unstable__animationState:d}=t,_=Ae(),h=ge({preventDefault:m=>m.key!==" "&&q(m.target)}),L=a.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const I=m.key,b={Tab:E=>E.preventDefault(),Escape:c,ArrowDown:()=>{const E=_.nextEnabled(s);E&&o(E.index)},ArrowUp:()=>{const E=_.prevEnabled(s);E&&o(E.index)}}[I];if(b){m.preventDefault(),b(m);return}const g=h(E=>{const p=ke(_.values(),E,M=>{var k,S;return(S=(k=M==null?void 0:M.node)==null?void 0:k.textContent)!=null?S:""},_.item(s));if(p){const M=_.indexOf(p.node);o(M)}});q(m.target)&&g(m)},[_,s,h,c,o]),D=a.useRef(!1);u&&(D.current=!0);const w=he({wasSelected:D.current,enabled:f,mode:i,isSelected:d.present});return{...e,ref:Z(r,n),children:w?e.children:null,tabIndex:-1,role:"menu",id:l,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:V(e.onKeyDown,L)}}function Be(e={}){const{popper:n,isOpen:t}=j();return n.getPopperProps({...e,style:{visibility:t?"visible":"hidden",...e.style}})}function Ue(e={},n=null){const{onMouseEnter:t,onMouseMove:s,onMouseLeave:o,onClick:r,onFocus:u,isDisabled:c,isFocusable:l,closeOnSelect:f,type:i,...d}=e,_=j(),{setFocusedIndex:h,focusedIndex:L,closeOnSelect:D,onClose:w,menuRef:m,isOpen:I,menuId:P,rafId:b}=_,g=a.useRef(null),E=`${P}-menuitem-${a.useId()}`,{index:p,register:M}=Re({disabled:c&&!l}),k=a.useCallback(v=>{t==null||t(v),!c&&h(p)},[h,p,c,t]),S=a.useCallback(v=>{s==null||s(v),g.current&&!Q(g.current)&&k(v)},[k,s]),z=a.useCallback(v=>{o==null||o(v),!c&&h(-1)},[h,c,o]),R=a.useCallback(v=>{r==null||r(v),q(v.currentTarget)&&(f??D)&&w()},[w,r,D,f]),F=a.useCallback(v=>{u==null||u(v),h(p)},[h,u,p]),T=p===L,B=c&&!l;G(()=>{if(I)return T&&!B&&g.current?(b.current&&cancelAnimationFrame(b.current),b.current=requestAnimationFrame(()=>{var v;(v=g.current)==null||v.focus({preventScroll:!0}),b.current=null})):m.current&&!Q(m.current)&&m.current.focus({preventScroll:!0}),()=>{b.current&&cancelAnimationFrame(b.current)}},[T,B,m,I]);const U=be({onClick:R,onFocus:F,onMouseEnter:k,onMouseMove:S,onMouseLeave:z,ref:Z(M,g,n),isDisabled:c,isFocusable:l});return{...d,...U,type:i??U.type,id:E,role:"menuitem",tabIndex:T?0:-1}}function We(e){var n;if(!He(e))return!1;const t=(n=e.ownerDocument.defaultView)!=null?n:window;return e instanceof t.HTMLElement}function He(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}var[$e,K]=X({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Ve=e=>{const{children:n}=e,t=le("Menu",e),s=de(e),{direction:o}=fe(),{descendants:r,...u}=je({...s,direction:o}),c=a.useMemo(()=>u,[u]),{isOpen:l,onClose:f,forceUpdate:i}=c;return y.jsx(Fe,{value:r,children:y.jsx(Te,{value:c,children:y.jsx($e,{value:t,children:me(n,{isOpen:l,onClose:f,forceUpdate:i})})})})};Ve.displayName="Menu";var ne=A((e,n)=>{const t=K();return y.jsx(O.span,{ref:n,...e,__css:t.command,className:"chakra-menu__command"})});ne.displayName="MenuCommand";var qe=A((e,n)=>{const{type:t,...s}=e,o=K(),r=s.as||t?t??void 0:"button",u=a.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...o.item}),[o.item]);return y.jsx(O.button,{ref:n,type:r,...s,__css:u})}),te=e=>{const{className:n,children:t,...s}=e,o=K(),r=a.Children.only(t),u=a.isValidElement(r)?a.cloneElement(r,{focusable:"false","aria-hidden":!0,className:N("chakra-menu__icon",r.props.className)}):null,c=N("chakra-menu__icon-wrapper",n);return y.jsx(O.span,{className:c,...s,__css:o.icon,children:u})};te.displayName="MenuIcon";var Ge=A((e,n)=>{const{icon:t,iconSpacing:s="0.75rem",command:o,commandSpacing:r="0.75rem",children:u,...c}=e,l=Ue(c,n),i=t||o?y.jsx("span",{style:{pointerEvents:"none",flex:1},children:u}):u;return y.jsxs(qe,{...l,className:N("chakra-menu__menuitem",l.className),children:[t&&y.jsx(te,{fontSize:"0.8em",marginEnd:s,children:t}),i,o&&y.jsx(ne,{marginStart:r,children:o})]})});Ge.displayName="MenuItem";var Ze={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},Je=O(pe.div),Qe=A(function(n,t){var s,o;const{rootProps:r,motionProps:u,...c}=n,{isOpen:l,onTransitionEnd:f,unstable__animationState:i}=j(),d=ze(c,t),_=Be(r),h=K();return y.jsx(O.div,{..._,__css:{zIndex:(o=n.zIndex)!=null?o:(s=h.list)==null?void 0:s.zIndex},children:y.jsx(Je,{variants:Ze,initial:!1,animate:l?"enter":"exit",__css:{outline:0,...h.list},...u,className:N("chakra-menu__menu-list",d.className),...d,onUpdate:f,onAnimationComplete:ve(i.onComplete,d.onAnimationComplete)})})});Qe.displayName="MenuList";var Xe=A((e,n)=>{const t=K();return y.jsx(O.button,{ref:n,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...t.button}})}),Ye=A((e,n)=>{const{children:t,as:s,...o}=e,r=Ke(o,n),u=s||Xe;return y.jsx(u,{...r,className:N("chakra-menu__menu-button",e.className),children:y.jsx(O.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});Ye.displayName="MenuButton";export{Ve as M,Ye as a,Qe as b,Ge as c};
