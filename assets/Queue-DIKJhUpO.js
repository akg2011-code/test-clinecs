import{r as o,E as c,af as $,j as e,U as C,T as s,B as r,M as E,J as Y,w as M}from"./index-DLnjnVCu.js";import{a as F,u as y}from"./SettingData-5sbMzAiY.js";import{i as q}from"./image-BEsbZakN.js";import{t as P}from"./today-D_vLUvRX.js";import{G as v}from"./chunk-JARCRF6W-CtmXHheL.js";import{L as O}from"./chunk-46CXQZ4E-BT9pxOQy.js";import{F as B,I as G}from"./utils-DHjTyQ2S.js";import{S as H}from"./chunk-3RSXBRAN-DjkGz0-1.js";import{T as J,a as K,b as A,c as u,d as Q,e as j}from"./chunk-MGVPL3OH-BhiF1P3g.js";const U=async()=>(await Y(M.token,"get_doctor")).data,oe=()=>{const{settingsData:d}=F(),f=d==null?void 0:d.find(t=>t.id_name==="logo"),[T,I]=o.useState(c().format("MMMM D YYYY, h:mm:ss a")),[h,x]=o.useState(!1),[p,w]=o.useState(c().format("YYYY-MM-DD")),[L,b]=o.useState(!1),[_,g]=$(),i=_.get("doct"),l=_.get("name");o.useEffect(()=>{const t=setInterval(()=>{I(c().format("MMMM D YYYY, h:mm:ss a"))},1e3);return()=>clearInterval(t)},[]);const{isLoading:k,data:m}=y({queryKey:["doctors"],queryFn:U});o.useEffect(()=>{if(m){const t=m[0];(!i||!l)&&g({doct:t.user_id,name:`${t.f_name} ${t.l_name}`})}},[i,l,m,g]);const N=async()=>{var n;b(!0);const t=await Y((n=M)==null?void 0:n.token,`get_appointment_check_in_doct_date/${i}/${p}`);return b(!1),t.data},{data:R,error:z,isLoading:W}=y({queryKey:["appointments-queue",i,p],queryFn:N,refetchInterval:3e4,enabled:!!i});if(W||k||L)return e.jsx(C,{});if(z)return e.jsx(s,{color:"red.500",children:"Failed to load appointments"});const S=R||[],a=S[0]||null,D=S.slice(1);return e.jsxs(r,{p:4,bg:"blackAlpha.800",minH:"100vh",color:"white",children:[e.jsxs(v,{templateColumns:"1fr 3fr 1fr",gap:6,bg:"#fff",p:3,borderRadius:5,alignContent:"center",alignItems:"center",children:[e.jsx(r,{children:e.jsx(E,{w:20,src:`${q}/${f==null?void 0:f.value}`,fallbackSrc:"/vite.svg"})}),e.jsxs(B,{textAlign:"center",w:"100%",justifyContent:"center",gap:4,alignItems:"center",children:[e.jsxs(s,{fontSize:"2xl",fontWeight:"bold",color:"blue.600",cursor:"pointer",onClick:()=>{x(!h)},children:["Doctor ",l]}),h&&e.jsxs(e.Fragment,{children:[" ",e.jsx(H,{placeholder:l||"Select option",w:60,color:"#000",value:h,onChange:t=>{const n=JSON.parse(t.target.value);g({doct:n.user_id,name:`${n.f_name} ${n.l_name}`}),x(!1)},children:m.map(t=>e.jsxs("option",{color:"#000",value:JSON.stringify(t),children:["Dr. ",t.f_name," ",t.l_name]},t.id))}),e.jsx(G,{placeholder:"Select Date",w:60,color:"#000",value:p,type:"date",max:P(),onChange:t=>{const n=c(t.target.value).format("YYYY-MM-DD");w(n),x(!1)}})]})]})]}),e.jsxs(v,{templateColumns:"1fr 2fr",gap:6,mt:6,minH:"87vh",children:[e.jsxs(r,{bg:"blackAlpha.900",p:4,borderRadius:"md",minH:"70vh",px:2,pt:2,borderRight:"sm",color:"#000",children:[e.jsx(s,{fontSize:"2xl",fontWeight:"bold",mb:4,textAlign:"center",bg:"#fff",children:"Next Patients"}),e.jsx(O,{spacing:3,children:D.length>0?e.jsxs(J,{variant:"simple",children:[e.jsx(K,{children:e.jsxs(A,{children:[" ",e.jsx(u,{color:"#fff",children:"S No."}),e.jsx(u,{color:"#fff",children:"ID"}),e.jsx(u,{color:"#fff",children:"Patient Name"})]})}),e.jsx(Q,{children:D.map((t,n)=>e.jsxs(A,{color:"#fff",fontWeight:600,children:[" ",e.jsxs(j,{children:["#",n+2]}),e.jsxs(j,{children:["#",t.appointment_id]}),e.jsxs(j,{fontWeight:"bold",children:[" ",t.patient_f_name," ",t.patient_l_name]})]},t.id))})]}):e.jsx(s,{color:"#fff",children:"No upcoming patients"})})]}),e.jsxs(r,{children:[" ",e.jsx(r,{textAlign:"center",bg:"#fff",p:4,borderRadius:"md",mb:5,children:e.jsx(s,{fontSize:"3xl",fontWeight:700,py:3,color:"blue.600",children:T})}),e.jsxs(r,{bg:"blackAlpha.900",borderRadius:"md",pb:4,p:2,children:[e.jsx(s,{fontSize:"2xl",fontWeight:"bold",mb:4,px:2,py:2,bg:"#fff",borderRadius:"sm",color:"#000",textAlign:"center",children:"Now"}),a?e.jsxs(r,{bg:"gray.900",height:"full",p:4,m:4,color:"white",borderRadius:"sm",children:[e.jsxs(s,{fontSize:"3xl",fontWeight:700,textAlign:"center",children:["Appointment ID: #",a.appointment_id]}),e.jsxs(s,{fontWeight:"bold",fontSize:"2xl",textAlign:"center",children:["Name - ",a.patient_f_name," ",a.patient_l_name]}),e.jsxs(s,{textAlign:"center",fontSize:"xl",children:["Time:"," ",c(a.time,"hh:mm:ss").format("hh:mm A")]}),e.jsxs(s,{textAlign:"center",fontSize:"xl",children:["Date: ",a.date]})]}):e.jsx(s,{children:"No patient is currently being seen"})]})]})]})]})};export{oe as default};
