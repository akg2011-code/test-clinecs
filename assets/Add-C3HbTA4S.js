import{r as f,t as C,j as e,v as p,D as V,w as F,J,U as $,B as N,E as U,av as z}from"./index-DLnjnVCu.js";import{u as L,b as _,c as O,d as A,e as R,f as n,i as B,M as E,a as k,h as w,F as i,g as H}from"./index.esm-CU9MGMRa.js";import{A as K,a as W}from"./Dashboard-BVf00d6b.js";import{u as X}from"./SettingData-5sbMzAiY.js";import{t as Y}from"./today-D_vLUvRX.js";import{D as q}from"./index-Q7d3q0Zt.js";import{F as b,b as t,I as m}from"./utils-DHjTyQ2S.js";import{S as I}from"./chunk-3RSXBRAN-DjkGz0-1.js";import{U as Z}from"./UsersComboBox-DGcvoZQW.js";import{u as ee}from"./Users-BWgt3Tnp.js";import{f as se}from"./index-CrveBHTj.js";import{I as re,a as ie}from"./IsdModal-DvHKxEmI.js";import{I as te}from"./chunk-FKYN3ZGE-BIoTHd0a.js";function ye({isOpen:c,onClose:o,data:u}){const h=L(),a=f.useRef(),r=C(),[y,d]=f.useState(),l=async()=>{let g={id:u.id};try{d(!0);const s=await V(F.token,"delete_family_member",g);d(!1),s.response===200?(n(h,"success","Family Member Deleted!"),r.invalidateQueries("family-members"),o()):n(h,"error",s.message)}catch(s){d(!1),n(h,"error",JSON.stringify(s))}};return e.jsx(K,{isOpen:c,onClose:o,leastDestructiveRef:a,isCentered:!0,children:e.jsx(_,{children:e.jsxs(W,{children:[e.jsxs(O,{fontSize:"lg",fontWeight:"semi-bold",children:["Delete Family Member ( ",e.jsx("b",{children:u["Member name"]})," )"]}),e.jsx(A,{children:"Are you sure? You can not undo this action afterwards."}),e.jsxs(R,{children:[e.jsx(p,{ref:a,onClick:o,colorScheme:"gray",size:"sm",children:"Cancel"}),e.jsx(p,{colorScheme:"red",onClick:l,ml:3,size:"sm",isLoading:y,children:"Delete"})]})]})})})}function ge({data:c,isOpen:o,onClose:u}){const[h,a]=f.useState(),{register:r,handleSubmit:y}=B(),d=C(),l=L(),{isLoading:g,data:s}=X({queryKey:["family-member",c.id],queryFn:async()=>(await J(F.token,`get_family_members/${c.id}`)).data}),M=async x=>{let v={...x,dob:U(x.dob).format("YYYY-MM-DD"),id:c.id};try{a(!0);const j=await z(F.token,"update_family_member",v);a(!1),j.response===200?(n(l,"success","Family Member Updated!"),d.invalidateQueries(["family-member",c.id]),d.invalidateQueries(["family-members"]),u()):n(l,"error",j.message)}catch(j){a(!1),n(l,"error",JSON.stringify(j))}};return g?e.jsx($,{}):e.jsxs(E,{isOpen:o,onClose:u,isCentered:!0,size:"2xl",scrollBehavior:"inside",children:[e.jsx(_,{}),e.jsxs(k,{as:"form",onSubmit:y(M),children:[e.jsx(O,{fontSize:18,py:2,children:"Update Family Member"}),e.jsx(w,{}),e.jsx(q,{}),e.jsx(A,{children:e.jsxs(N,{pb:3,children:[e.jsxs(b,{gap:3,children:[" ",e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"First Name"}),e.jsx(m,{defaultValue:s==null?void 0:s.f_name,placeholder:"First Name",...r("f_name",{required:!0})})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Last Name"}),e.jsx(m,{defaultValue:s==null?void 0:s.l_name,placeholder:"Last Name",...r("l_name",{required:!0})})]})]}),e.jsxs(b,{gap:3,mt:5,children:[" ",e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Gender"}),e.jsxs(I,{defaultValue:s==null?void 0:s.gender,placeholder:"Select Gender",...r("gender",{required:!0}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Date Of Birth"}),e.jsx(m,{max:Y(),type:"date",defaultValue:s==null?void 0:s.dob,placeholder:"Date Of Birth",...r("dob",{required:!0})})]})]}),e.jsxs(b,{gap:3,mt:5,children:[" ",e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Phone"}),e.jsx(m,{defaultValue:s==null?void 0:s.phone,placeholder:"Phone",...r("phone",{required:!0})})]})]})]})}),e.jsx(q,{}),e.jsxs(R,{py:3,children:[e.jsx(p,{colorScheme:"gray",mr:3,onClick:u,size:"sm",children:"Close"}),e.jsx(p,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:h,children:"Update Family Member"})]})]})]})}function be({isOpen:c,onClose:o,user:u}){const[h,a]=f.useState(),{register:r,handleSubmit:y}=B(),d=C(),l=L(),{usersData:g}=ee(),[s,M]=f.useState(),[x,v]=f.useState("+91"),{isOpen:j,onOpen:Q,onClose:G}=H(),P=async D=>{s||n(l,"error","Select User");let T={...D,dob:U(D.dob).format("YYYY-MM-DD"),isd_code:x,user_id:s.id};try{a(!0);const S=await z(F.token,"add_family_member",T);a(!1),S.response===200?(n(l,"success","Family Member Added!"),d.invalidateQueries(["family-members"]),d.invalidateQueries(["family-members"]),o()):n(l,"error",S.message)}catch(S){a(!1),n(l,"error",JSON.stringify(S))}};return e.jsxs(E,{isOpen:c,onClose:o,isCentered:!0,size:"4xl",scrollBehavior:"inside",children:[e.jsx(_,{}),e.jsxs(k,{as:"form",onSubmit:y(P),children:[e.jsx(O,{fontSize:18,py:2,children:"Add Family Member"}),e.jsx(w,{}),e.jsx(q,{}),e.jsx(A,{children:e.jsxs(N,{pb:3,children:[e.jsxs(b,{gap:3,children:[e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"User"}),e.jsx(Z,{data:g,name:"User",setState:M,isUser:!0,defaultData:u})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"First Name"}),e.jsx(m,{placeholder:"First Name",...r("f_name",{required:!0})})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Last Name"}),e.jsx(m,{placeholder:"Last Name",...r("l_name",{required:!0})})]})]}),e.jsxs(b,{gap:3,mt:5,children:[e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Phone"}),e.jsxs(te,{children:[e.jsxs(re,{cursor:"pointer",onClick:D=>{D.stopPropagation(),Q()},children:[x," ",e.jsx(se,{style:{marginLeft:"10px"}})]}),e.jsx(m,{type:"tel",placeholder:"phone Number",...r("phone",{required:!0,pattern:/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\\./0-9]*$/g})})]})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Gender"}),e.jsxs(I,{placeholder:"Select Gender",...r("gender",{required:!0}),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs(t,{isRequired:!0,children:[e.jsx(i,{children:"Date Of Birth"}),e.jsx(m,{max:Y(),type:"date",placeholder:"Date Of Birth",...r("dob",{required:!0})})]})]})]})}),e.jsx(q,{}),e.jsxs(R,{py:3,children:[e.jsx(p,{colorScheme:"gray",mr:3,onClick:o,size:"sm",children:"Close"}),e.jsx(p,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:h,children:"Add Family Member"})]})]}),e.jsx(ie,{isOpen:j,onClose:G,setisd_code:v})]})}export{be as A,ye as D,ge as E};
