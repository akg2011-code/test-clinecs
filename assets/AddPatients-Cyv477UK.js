import{t as M,r as C,j as e,v as x,P as z,w as I,E as O}from"./index-DLnjnVCu.js";import{u as P,i as w,g as A,f as u,M as F,b as _,a as L,c as R,h as q,d as E,F as t,e as N}from"./index.esm-CU9MGMRa.js";import{I as B,a as G}from"./IsdModal-DvHKxEmI.js";import{f as k}from"./index-CrveBHTj.js";import{u as Y}from"./useMutation-CH8xzEHB.js";import{t as Q}from"./today-D_vLUvRX.js";import{D as T}from"./index-Q7d3q0Zt.js";import{G as H}from"./chunk-JARCRF6W-CtmXHheL.js";import{b as i,I as o}from"./utils-DHjTyQ2S.js";import{I as J}from"./chunk-FKYN3ZGE-BIoTHd0a.js";import{S as V}from"./chunk-3RSXBRAN-DjkGz0-1.js";const $=async n=>{const a=await z(I.token,"add_patient",n);if(a.response!==200)throw new Error(a.message);return a};function ae({nextFn:n,isOpen:a,onClose:d}){const h=M(),l=P(),{register:r,handleSubmit:f,reset:j,watch:m}=w(),[c,b]=C.useState("+91"),{isOpen:S,onOpen:v,onClose:y}=A(),p=Y({mutationFn:async s=>{await $(s)},onError:s=>{u(l,"error",JSON.stringify(s))},onSuccess:()=>{n&&n({f_name:m("f_name"),l_name:m("l_name"),phone:m("phone")}),u(l,"success","Patient Added"),h.invalidateQueries("users"),h.invalidateQueries("patients"),d(),j()}}),g=s=>{if(!c)return u(l,"error","Select ISD Code");let D={...s,isd_code:c,dob:s.dob?O(s.dob).format("YYYY-MM-DD"):""};p.mutate(D)};return e.jsxs(F,{isOpen:a,onClose:d,isCentered:!0,size:"xl",scrollBehavior:"inside",children:[e.jsx(_,{}),e.jsx("form",{onSubmit:f(g),children:e.jsxs(L,{borderRadius:8,overflow:"hidden",zIndex:99999999,children:[e.jsx(R,{py:1,fontSize:"md",bg:"blue.700",color:"#fff",children:"Add Patient"}),e.jsx(q,{top:0,color:"#fff"}),e.jsx(T,{}),e.jsx(E,{children:e.jsxs(H,{templateColumns:"repeat(3, 1fr)",gap:4,mt:3,children:[e.jsxs(i,{isRequired:!0,children:[e.jsx(t,{mb:-1,children:"First Name"}),e.jsx(o,{size:"sm",variant:"flushed",...r("f_name"),placeholder:"First Name"})]}),e.jsxs(i,{isRequired:!0,children:[e.jsx(t,{mb:-1,children:"Last Name"}),e.jsx(o,{size:"sm",variant:"flushed",...r("l_name"),placeholder:"Last Name"})]}),e.jsxs(i,{isRequired:!0,gridcx:!0,children:[e.jsx(t,{mb:-1,children:"Phone"}),e.jsxs(J,{children:[e.jsxs(B,{h:8,bg:"none",borderTop:0,borderLeft:0,p:0,pr:2,borderRadius:0,cursor:"pointer",onClick:s=>{s.stopPropagation(),v()},fontSize:"sm",children:[c," ",e.jsx(k,{style:{marginLeft:"10px"}})]}),e.jsx(o,{size:"sm",variant:"flushed",type:"tel",placeholder:"Phone Number",...r("phone",{required:!0,pattern:/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\\./0-9]*$/g})})]})]}),e.jsxs(i,{isRequired:!0,children:[e.jsx(t,{mb:-1,children:"Gender"}),e.jsxs(V,{size:"sm",variant:"flushed",defaultValue:"Male",...r("gender"),placeholder:"Gender",children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs(i,{isRequired:!0,children:[e.jsx(t,{mb:-1,children:"Date of Birth"}),e.jsx(o,{max:Q(),size:"sm",variant:"flushed",type:"date",...r("dob")})]}),e.jsxs(i,{children:[e.jsx(t,{mb:-1,children:"City"}),e.jsx(o,{size:"sm",variant:"flushed",...r("city")})]}),e.jsxs(i,{children:[e.jsx(t,{mb:-1,children:"State"}),e.jsx(o,{size:"sm",variant:"flushed",...r("state")})]})]})}),e.jsxs(N,{children:[e.jsx(x,{colorScheme:"gray",mr:3,onClick:d,size:"sm",children:"Close"}),e.jsx(x,{colorScheme:"blue",size:"sm",type:"submit",isLoading:p.isPending,children:"Add Patient"})]})]})}),e.jsx(G,{isOpen:S,onClose:y,setisd_code:b})]})}export{ae as A};
